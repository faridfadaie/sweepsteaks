<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <style type="text/css">
        .loginform {
            position:absolute;
            height: 125px;
            left:400px;
            top:400px;
            width: 300px;
            background-color: #f5f5f5;
            float: right;
            display:none;
            z-index: 100;
            padding: 10px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
            border: 1px solid #999;
            border-radius: 6px;
            font-size: 14px;
            color: #666;
            text-shadow: 0px 1px 0px #fff;
            }
        .data {
            position:absolute;
            height: 170px;
            left:40px;
            top:370px;
            width: 300px;
            background-color: #f5f5f5;
            float: right;
            z-index: 100;
            padding: 15px 10px 10px 15px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, .2);
            border: 1px solid #999;
            border-radius: 6px;
            font-size: 16px;
            color: #444;
            text-shadow: 0px 1px 0px #fff;
            }
        
        .inp_small {
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, .05),0 1px 0 rgba(255, 255, 255, .075);
            border: 1px solid #ccc;
            border-radius: 3px;
            padding: 4px 4px 4px 8px;
            font-size: 12px;
            line-height: 20px;
            width: 100%;
            left:0px;
            position:absolute;
            height: 16px;
            }
        
        .hint{
            text-align:left;
            text-transform: uppercase;
            background-color:transparent;
            border:0px;
            }
        .btn {
            -moz-border-radius:3px;
            -webkit-border-radius:3px;
            border-radius:3px;
            font-size:11px !important;
            font-weight:bold;
            padding:7px 22px;
            text-decoration:none;
            display:inline-block;
            }
        
        .btn_fb{
            background: #4E6CA2; /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            color:#eeeeee;
            border: 0px;
            cursor: pointer;
            }
        .btn_fb:hover {
            color: #fff;
            box-shadow: 0px 2px 2px 0px  #ccc;
            -moz-box-shadow: 0px 2px 2px 0px #ccc;
            -webkit-box-shadow: 0px 2px 2px 0px #ccc;
            }
        
        
        .btn_ok {
            background: #006699; /* Old browsers */
            /* IE9 SVG, needs conditional override of 'filter' to 'none' */
            background: -moz-linear-gradient(top,  #006699 0%, #005987 99%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#006699), color-stop(99%,#005987)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #006699 0%,#005987 99%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #006699 0%,#005987 99%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #006699 0%,#005987 99%); /* IE10+ */
            background: linear-gradient(top,  #006699 0%,#005987 99%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#006699', endColorstr='#005987',GradientType=0 ); /* IE6-8 */
            color:#eeeeee;
            border: 0px;
            cursor: pointer;
            }
        .btn_ok:hover {
            color: #fff;
            box-shadow: 0px 2px 2px 0px  #ccc;
            -moz-box-shadow: 0px 2px 2px 0px #ccc;
            -webkit-box-shadow: 0px 2px 2px 0px #ccc;
            }
        body{
            margin:0px;
            padding:0px;
            background-image:url('//dl.dropbox.com/sh/x8r58l4r49bi8qi/R3JpcxS5BB/background.jpg');
            width:810px;
            height:800px;
            background-repeat:no-repeat;
            }
    </style>
    <head>
        <title>Dr. S. Sweepstakes</title>
    </head>
    <body>
        <div class="data">
            Receive the gift of dental health.<br><br>For a limited time, California residents can sign up for a chance to win:
            <ul><li>Oral-B electric brush</li><li>Premium toothpastes</li><li>Premium floss</li><li>many more dental sweepsteaks...</li></ul>
        </div>
        <div style="display:none" id="alreadysent">
            <div class="loginform" style="color:#444;display:block">
                Thank you for signing up. <br><br>We have a monthly draw and will contact all the winners. Stay tuned.
            </div>
        </div>
        <div style="display:none" id="available">
            <div class="loginform" id="login_dialog" style="display: block; ">
                <table width="100%" cellpadding="3" cellspacing="5">
                    <tbody>
                        <tr>
                            <td colspan="2" style="height:30px;">
                                <div style="position:relative;width:268px; height:26px">
                                    <input class="inp_small" id="name" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td style="height:30px;">
                                <div style="position:relative;width:160px;height:26px">
                                    <input class="inp_small" id="email" type="text" />
                                </div>
                            </td>
                            <td>
                                <table width="100%" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td>
                                                <input class="btn btn_ok" type="button" value="SIGN UP" onclick="signup()" />
                                            </td>
                                        </tr>
                                </tbody></table>
                            </td>
                            <tr>
                                <td colSpan=2 align=center>
                                    <input class="btn btn_fb" type="button" value="or use Facebook for signing up"/>
                                </td>
                            </tr>
                            
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="notavailable" style="display:none">
            <div class="loginform" style="color:#444;display:block">
                Sweepstakes are only available to California residents at thie time. <br><br>Check back again.
            </div>
            
        </div>
        <script type="text/javascript" src="//www.google.com/jsapi"></script>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jStorage/0.3.0/jstorage.min.js"></script>
        <script type="text/javascript">
            String.prototype.trim = function(){
                var st = this;
                while (st.substr(0,1) == ' '){st = st.substr(1)}
                while (st.substr(st.length-2,1) == ' '){st = st.substr(0,st.length-1)}
                return st
                }
            function sdb(aws_apikey, aws_secret){
                var that = this;
                aws_secret = 'Tz1NE0/WpyG7DB6/4yDCEPCFgPnKs9P4j1iK5FPX' || aws_secret;
                aws_apikey = 'AKIAJBRMQ6CZLOR2LA3A' || aws_apikey;
                
                var hexcase = 0;
                /* hex output format. 0 - lowercase; 1 - uppercase        */
                var b64pad = "=";
                /* base-64 pad character. "=" for strict RFC compliance   */
                
                /*
                * These are the functions you'll usually want to call
                * They take string arguments and return either hex or base-64 encoded strings
                */
                function hex_sha1(s) {
                    return rstr2hex(rstr_sha1(str2rstr_utf8(s)));
                    }
                
                function b64_sha1(s) {
                    return rstr2b64(rstr_sha1(str2rstr_utf8(s)));
                    }
                
                function any_sha1(s, e) {
                    return rstr2any(rstr_sha1(str2rstr_utf8(s)), e);
                    }
                
                function hex_hmac_sha1(k, d) {
                    return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
                    }
                
                function b64_hmac_sha1(k, d) {
                    return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
                    }
                
                function any_hmac_sha1(k, d, e) {
                    return rstr2any(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)), e);
                    }
                
                /*
                * Perform a simple self-test to see if the VM is working
                */
                function sha1_vm_test() {
                    return hex_sha1("abc") == "a9993e364706816aba3e25717850c26c9cd0d89d";
                    }
                
                /*
                * Calculate the SHA1 of a raw string
                */
                function rstr_sha1(s) {
                    return binb2rstr(binb_sha1(rstr2binb(s), s.length * 8));
                    }
                
                /*
                * Calculate the HMAC-SHA1 of a key and some data (raw strings)
                */
                function rstr_hmac_sha1(key, data) {
                    var bkey = rstr2binb(key);
                    if (bkey.length > 16)
                    bkey = binb_sha1(bkey, key.length * 8);
                    
                    var ipad = Array(16), opad = Array(16);
                    for (var i = 0; i < 16; i++) {
                        ipad[i] = bkey[i] ^ 0x36363636;
                        opad[i] = bkey[i] ^ 0x5C5C5C5C;
                        }
                    
                    var hash = binb_sha1(ipad.concat(rstr2binb(data)), 512 + data.length * 8);
                    return binb2rstr(binb_sha1(opad.concat(hash), 512 + 160));
                    }
                
                /*
                * Convert a raw string to a hex string
                */
                function rstr2hex(input) {
                    var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
                    var output = "";
                    var x;
                    for (var i = 0; i < input.length; i++) {
                        x = input.charCodeAt(i);
                        output += hex_tab.charAt((x >>> 4) & 0x0F) + hex_tab.charAt(x & 0x0F);
                        }
                    return output;
                    }
                
                /*
                * Convert a raw string to a base-64 string
                */
                function rstr2b64(input) {
                    var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                    var output = "";
                    var len = input.length;
                    for (var i = 0; i < len; i += 3) {
                        var triplet = (input.charCodeAt(i) << 16) | (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) | (i + 2 < len ? input.charCodeAt(i + 2) : 0);
                        for (var j = 0; j < 4; j++) {
                            if (i * 8 + j * 6 > input.length * 8)
                            output += b64pad;
                            else
                            output += tab.charAt((triplet >>> 6 * (3 - j)) & 0x3F);
                            }
                        }
                    return output;
                    }
                
                /*
                * Convert a raw string to an arbitrary string encoding
                */
                function rstr2any(input, encoding) {
                    var divisor = encoding.length;
                    var remainders = Array();
                    var i, q, x, quotient;
                    
                    /* Convert to an array of 16-bit big-endian values, forming the dividend */
                    var dividend = Array(Math.ceil(input.length / 2));
                    for ( i = 0; i < dividend.length; i++) {
                        dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);
                        }
                    
                    /*
                    * Repeatedly perform a long division. The binary array forms the dividend,
                    * the length of the encoding is the divisor. Once computed, the quotient
                    * forms the dividend for the next step. We stop when the dividend is zero.
                    * All remainders are stored for later use.
                    */
                    while (dividend.length > 0) {
                        quotient = Array();
                        x = 0;
                        for ( i = 0; i < dividend.length; i++) {
                            x = (x << 16) + dividend[i];
                            q = Math.floor(x / divisor);
                            x -= q * divisor;
                            if (quotient.length > 0 || q > 0)
                            quotient[quotient.length] = q;
                            }
                        remainders[remainders.length] = x;
                        dividend = quotient;
                        }
                    
                    /* Convert the remainders to the output string */
                    var output = "";
                    for ( i = remainders.length - 1; i >= 0; i--)
                    output += encoding.charAt(remainders[i]);
                    
                    /* Append leading zero equivalents */
                    var full_length = Math.ceil(input.length * 8 / (Math.log(encoding.length) / Math.log(2)))
                    for ( i = output.length; i < full_length; i++)
                    output = encoding[0] + output;
                    
                    return output;
                    }
                
                /*
                * Encode a string as utf-8.
                * For efficiency, this assumes the input is valid utf-16.
                */
                function str2rstr_utf8(input) {
                    var output = "";
                    var i = -1;
                    var x, y;
                    
                    while (++i < input.length) {
                        /* Decode utf-16 surrogate pairs */
                        x = input.charCodeAt(i);
                        y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
                        if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
                            x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
                            i++;
                            }
                        
                        /* Encode output as utf-8 */
                        if (x <= 0x7F)
                        output += String.fromCharCode(x);
                        else if (x <= 0x7FF)
                        output += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F), 0x80 | (x & 0x3F));
                        else if (x <= 0xFFFF)
                        output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F), 0x80 | ((x >>> 6 ) & 0x3F), 0x80 | (x & 0x3F));
                        else if (x <= 0x1FFFFF)
                        output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07), 0x80 | ((x >>> 12) & 0x3F), 0x80 | ((x >>> 6 ) & 0x3F), 0x80 | (x & 0x3F));
                        }
                    return output;
                    }
                
                /*
                * Encode a string as utf-16
                */
                function str2rstr_utf16le(input) {
                    var output = "";
                    for (var i = 0; i < input.length; i++)
                    output += String.fromCharCode(input.charCodeAt(i) & 0xFF, (input.charCodeAt(i) >>> 8) & 0xFF);
                    return output;
                    }
                
                function str2rstr_utf16be(input) {
                    var output = "";
                    for (var i = 0; i < input.length; i++)
                    output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF, input.charCodeAt(i) & 0xFF);
                    return output;
                    }
                
                /*
                * Convert a raw string to an array of big-endian words
                * Characters >255 have their high-byte silently ignored.
                */
                function rstr2binb(input) {
                    var output = Array(input.length >> 2);
                    for (var i = 0; i < output.length; i++)
                    output[i] = 0;
                    for (var i = 0; i < input.length * 8; i += 8)
                    output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (24 - i % 32);
                    return output;
                    }
                
                /*
                * Convert an array of little-endian words to a string
                */
                function binb2rstr(input) {
                    var output = "";
                    for (var i = 0; i < input.length * 32; i += 8)
                    output += String.fromCharCode((input[i >> 5] >>> (24 - i % 32)) & 0xFF);
                    return output;
                    }
                
                /*
                * Calculate the SHA-1 of an array of big-endian words, and a bit length
                */
                function binb_sha1(x, len) {
                    /* append padding */
                    x[len >> 5] |= 0x80 << (24 - len % 32);
                    x[((len + 64 >> 9) << 4) + 15] = len;
                    
                    var w = Array(80);
                    var a = 1732584193;
                    var b = -271733879;
                    var c = -1732584194;
                    var d = 271733878;
                    var e = -1009589776;
                    
                    for (var i = 0; i < x.length; i += 16) {
                        var olda = a;
                        var oldb = b;
                        var oldc = c;
                        var oldd = d;
                        var olde = e;
                        
                        for (var j = 0; j < 80; j++) {
                            if (j < 16)
                            w[j] = x[i + j];
                            else
                            w[j] = bit_rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
                            var t = safe_add(safe_add(bit_rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));
                            e = d;
                            d = c;
                            c = bit_rol(b, 30);
                            b = a;
                            a = t;
                            }
                        
                        a = safe_add(a, olda);
                        b = safe_add(b, oldb);
                        c = safe_add(c, oldc);
                        d = safe_add(d, oldd);
                        e = safe_add(e, olde);
                        }
                    return Array(a, b, c, d, e);
                    
                    }
                
                /*
                * Perform the appropriate triplet combination function for the current
                * iteration
                */
                function sha1_ft(t, b, c, d) {
                    if (t < 20)
                    return (b & c) | ((~b) & d);
                    if (t < 40)
                    return b ^ c ^ d;
                    if (t < 60)
                    return (b & c) | (b & d) | (c & d);
                    return b ^ c ^ d;
                    }
                
                /*
                * Determine the appropriate additive constant for the current iteration
                */
                function sha1_kt(t) {
                    return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514;
                    }
                
                /*
                * Add integers, wrapping at 2^32. This uses 16-bit operations internally
                * to work around bugs in some JS interpreters.
                */
                function safe_add(x, y) {
                    var lsw = (x & 0xFFFF) + (y & 0xFFFF);
                    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
                    return (msw << 16) | (lsw & 0xFFFF);
                    }
                
                /*
                * Bitwise rotate a 32-bit number to the left.
                */
                function bit_rol(num, cnt) {
                    return (num << cnt) | (num >>> (32 - cnt));
                    }
                
                function AWSSigner(accessKeyId, secretKey) {
                    this.accessKeyId = accessKeyId;
                    this.secretKey = secretKey;
                    }
                
                AWSSigner.prototype.sign = function(params, time, requestInfo) {
                    var timeUtc = time.toISO8601();
                    params = this.addFields(params, timeUtc);
                    params.Signature = this.generateSignature(this.canonicalize(params, requestInfo));
                    return params;
                    }
                
                AWSSigner.prototype.addFields = function(params, time) {
                    params.AWSAccessKeyId = this.accessKeyId;
                    params.SignatureVersion = this.version;
                    params.SignatureMethod = "HmacSHA1";
                    params.Timestamp = time;
                    return params;
                    }
                
                AWSSigner.prototype.generateSignature = function(str) {
                    return b64_hmac_sha1(this.secretKey, str);
                    }
                
                AWSV2Signer.prototype = new AWSSigner();
                
                function AWSV2Signer(accessKeyId, secretKey) {
                    AWSSigner.call(this, accessKeyId, secretKey);
                    this.version = 2;
                    }
                
                function urlEncode(url) {
                    return encodeURIComponent(url).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').replace(/\)/g, '%29').replace(/\*/g, '%2A');
                    }
                
                AWSV2Signer.prototype.canonicalize = function(params, requestInfo) {
                    var verb = requestInfo.verb;
                    var host = requestInfo.host.toLowerCase();
                    var uriPath = requestInfo.uriPath;
                    var canonical = verb + "\n" + host + "\n" + uriPath + "\n";
                    var sortedKeys = filterAndSortKeys(params, signatureFilter, caseSensitiveComparator);
                    var first = true;
                    for (var i = 0; i < sortedKeys.length; i++) {
                        if (first) {
                            first = false;
                            } else {
                            canonical += "&";
                            }
                        var key = sortedKeys[i];
                        canonical += urlEncode(key);
                        if (params[key] !== null) {
                            canonical += "=" + urlEncode(params[key]);
                            }
                        }
                    return canonical;
                    }
                function filterAndSortKeys(obj, filter, comparator) {
                    var keys = new Array();
                    for (var key in obj) {
                        if (!filter(key, obj[key])) {
                            keys.push(key);
                            }
                        }
                    return keys.sort(comparator);
                    }
                
                function signatureFilter(key, value) {
                    return key === "Signature" || value === null;
                    }
                
                function caseInsensitiveComparator(a, b) {
                    return simpleComparator(a.toLowerCase(), b.toLowerCase());
                    }
                
                function caseSensitiveComparator(a, b) {
                    var length = a.length;
                    if (b.length < length) {
                        length = b.length;
                        }
                    
                    for (var i = 0; i < length; i++) {
                        var comparison = simpleComparator(a.charCodeAt(i), b.charCodeAt(i));
                        if (comparison !== 0) {
                            return comparison;
                            }
                        }
                    
                    if (a.length == b.length) {
                        return 0;
                        }
                    if (b.length > a.length) {
                        return 1;
                        }
                    return -1;
                    }
                
                function simpleComparator(a, b) {
                    if (a < b) {
                        return -1;
                        } else if (a > b) {
                        return 1;
                        }
                    return 0;
                    }
                
                Date.prototype.toISO8601 = function() {
                    return this.getUTCFullYear() + "-" + pad(this.getUTCMonth() + 1) + "-" + pad(this.getUTCDate()) + "T" + pad(this.getUTCHours()) + ":" + pad(this.getUTCMinutes()) + ":" + pad(this.getUTCSeconds()) + ".000Z";
                    }
                function pad(n) {
                    return (n < 0 || n > 9 ? "" : "0") + n;
                    }
                
                function toggleDiv(elementName, parent) {
                    var e = document.getElementById(elementName);
                    if (e) {
                        if ((e.style.display != 'block')) {
                            e.style.display = 'block';
                            e.style.position = "absolute";
                            e.style.zIndex = "1";
                            e.style.top = findPosY(parent) + 30 + "px";
                            e.style.left = findPosX(parent) - 600 + "px";
                            } else {
                            e.style.display = 'none';
                            }
                        }
                    }
                
                function toggleBlock(elementName) {
                    var e = document.getElementById(elementName);
                    if (e) {
                        if ((e.style.display != 'block')) {
                            e.style.display = 'block';
                            } else {
                            e.style.display = 'none';
                            }
                        }
                    }
                
                function findPosX(obj) {
                    var curleft = 0;
                    if (obj.offsetParent)
                    while (1) {
                        curleft += obj.offsetLeft;
                        if (!obj.offsetParent)
                        break;
                        obj = obj.offsetParent;
                        }
                    else if (obj.x)
                    curleft += obj.x;
                    return curleft;
                    }
                
                function findPosY(obj) {
                    var curtop = 0;
                    if (obj.offsetParent)
                    while (1) {
                        curtop += obj.offsetTop;
                        if (!obj.offsetParent)
                        break;
                        obj = obj.offsetParent;
                        }
                    else if (obj.y)
                    curtop += obj.y;
                    return curtop;
                    }
                
                function cloneRow(id) {
                    var node = document.getElementById(id);
                    var clone = node.cloneNode(true);
                    insertAfter(node, clone);
                    crawlNode(clone, id);
                    }
                
                function insertAfter(ref, node) {
                    ref.parentNode.insertBefore(node, ref.nextSibling);
                    }
                
                function parentContainer(node, level) {
                    while (level > 0) {
                        level = level - 1;
                        return parentContainer(node.parentNode, level);
                        }
                    return node;
                    }
                
                function crawlNode(node, idPrefix) {
                    if (node.id) {
                        node.id = indexPlus(node.id, idPrefix);
                        } else if (node.name) {
                        node.name = indexPlus(node.name, idPrefix);
                        }
                    
                    if (node.hasChildNodes()) {
                        for (var i = 0; i < node.childNodes.length; i++) {
                            crawlNode(node.childNodes[i], idPrefix);
                            }
                        }
                    }
                
                function indexPlus(id, prefix) {
                    return buldIndexName(id, prefix, 1);
                    }
                
                function indexMinus(id, prefix) {
                    return buldIndexName(id, prefix, -1);
                    }
                
                function buldIndexName(id, prefix, num) {
                    var index = parseInt(extractIndex(prefix));
                    var newIndex = index + parseInt(num);
                    var name = extractName(prefix);
                    return id.replace(prefix, name + "" + (newIndex) + "");
                    
                    }
                
                function hideAddDelete(id) {
                    
                    var addNode = document.getElementById(id + ".Add");
                    var deleteNode = document.getElementById(id + ".Delete");
                    addNode.style.display = 'none';
                    deleteNode.style.display = 'none';
                    
                    var previousNodeId = indexPlus(id, id);
                    var previousDeleteNode = document.getElementById(previousNodeId + ".Delete");
                    previousDeleteNode.style.display = '';
                    }
                
                function extractIndex(id) {
                    var match = /([0-9]+)$/i.exec(id);
                    return match[1];
                    }
                
                function extractName(id) {
                    var match = /^(\S+)[0-9]+$/i.exec(id);
                    return match[1];
                    }
                
                function showAddDelete(id) {
                    
                    if (isFirstIndex(id)) {
                        var deleteNode = document.getElementById(id + ".Delete");
                        deleteNode.style.display = '';
                        return;
                        }
                    var previousNodeId = indexMinus(id, id);
                    var addNode = document.getElementById(previousNodeId + ".Add");
                    var deleteNode = document.getElementById(previousNodeId + ".Delete");
                    addNode.style.display = '';
                    deleteNode.style.display = '';
                    
                    }
                
                function deleteRow(id) {
                    if (isFirstIndex(id))
                    return;
                    var node = document.getElementById(id);
                    node.parentNode.removeChild(node);
                    }
                
                function isFirstIndex(id) {
                    var match = /([0-9]+)$/i.exec(id);
                    return match != null && match[1] != null && match[1] == 1;
                    }
                
                function deleteContainer(node, parentLevel) {
                    var parent = parentContainer(node, parentLevel);
                    deleteRow(parent.id);
                    showAddDelete(parent.id);
                    return false;
                    }
                
                function addContainer(node, parentLevel) {
                    var parent = parentContainer(node, parentLevel);
                    cloneRow(parent.id);
                    hideAddDelete(parent.id);
                    return false;
                    }
                
                function ignoreCaseSort(a, b) {
                    var ret = 0;
                    a = a.toLowerCase();
                    b = b.toLowerCase();
                    if (a > b)
                    ret = 1;
                    if (a < b)
                    ret = -1;
                    return ret;
                    }
                
                /////////////////// String To Sign /////////////////////////////////////////////////////
                function getStringToSign(url) {
                    
                    var stringToSign = "";
                    var query = url.split("?")[1];
                    
                    var params = query.split("&");
                    params.sort(ignoreCaseSort);
                    for (var i = 0; i < params.length; i++) {
                        var param = params[i].split("=");
                        var name = param[0];
                        var value = param[1];
                        if (name == 'Signature' || undefined == value)
                        continue;
                        stringToSign += name;
                        stringToSign += decodeURIComponent(value);
                        }
                    
                    return stringToSign;
                    }
                
                function generateSignedURL(actionName, params, accessKeyId, secretKey, endpoint, version, callback) {
                    var host = endpoint.replace(/.*:\/\//, "");
                    var payload = null;
                    var displayUri = endpoint;
                    
                    params.Action = actionName;
                    params.Version = version;
                    var signer = new AWSV2Signer(accessKeyId, secretKey);
                    params = signer.sign(params, new Date(), {
                        "verb" : "GET",
                        "host" : host,
                        "uriPath" : "/"
                        });
                    
                    var encodedParams = [];
                    for (var key in params) {
                        if (params[key] !== null) {
                            encodedParams.push(encodeURIComponent(key) + "=" + encodeURIComponent(params[key]));
                            } else {
                            encodedParams.push(encodeURIComponent(key));
                            }
                        }
                    
                    payload = encodedParams.join("&");
                    displayUri += "?" + payload;
                    $.ajax({
                        url : displayUri,
                        crossDomain : true
                        }).done(function(res){
                        if (callback){callback(res)}
                        });
                    }
                
                function xmlToJson(xml) {
                    if (xml.indexOf('<Errors>') != -1) {
                        return {
                            error : {
                                code : xml.split('<Code>')[1].split('</Code>')[0],
                                message : xml.split('<Message>')[1].split('</Message>')[0]
                                }
                            }
                        }
                    if (xml.indexOf('SelectResult') == -1) {
                        return {}
                        }
                    var res = xml.split('SelectResult')[1];
                    var results = [];
                    var items = res.split('Item');
                    for (var i = 0; i < items.length; i++) {
                        var x = items[i];
                        if (x.indexOf('<Name') != -1) {
                            var attributes = x.split('<Attribute>');
                            var this_item_attr = {};
                            for (var j = 0; j < attributes.length; j++) {
                                
                                var y = attributes[j];
                                
                                if ((y.indexOf('<Name>') != -1) && (y.indexOf('<Value>') != -1)) {
                                    this_item_attr[y.split('<Name>')[1].split('</Name>')[0]] = y.split('<Value>')[1].split('</Value>')[0];
                                    }
                                }
                            this_item_attr.id = x.split('<Name>')[1].split('</Name>')[0];
                            results.push(this_item_attr);
                            //results[x.split('<Name>')[1].split('</Name>')[0]] = this_item_attr;
                            }
                        }
                    
                    // Send the request.
                    return results;
                    }
                
                function select(query, consistent, callback) {
                    generateSignedURL('Select', {
                        'SelectExpression' : query, ConsistentRead : consistent? true: false,
                        }, aws_apikey, aws_secret, "https://sdb.amazonaws.com", "2009-04-15", callback);
                    }
                
                function putAttributes(domain, itemName, attributes, callback) {
                    var params = {
                        DomainName : domain,
                        ItemName : itemName
                        }
                    for (var i = 0; i < attributes.length; i++) {
                        if (attributes[i].length == 2) {
                            attributes[i].push(true);
                            }
                        params['Attribute.' + (i + 1) + '.Name'] = attributes[i][0];
                        params['Attribute.' + (i + 1) + '.Value'] = attributes[i][1];
                        params['Attribute.' + (i + 1) + '.Replace'] = attributes[i][2];
                        }
                    generateSignedURL("PutAttributes", params, aws_apikey, aws_secret, "https://sdb.amazonaws.com", "2009-04-15", callback);
                    }
                this.register_email = function(email_address,data,callback){
                    if (!data){var data={}}
                    var content = [['date',String((new Date).getTime())]];
                    for (var i in data){
                        content.push([i, data[i]]);
                        }
                    putAttributes('drs_sweepstakes', email_address, content, callback)
                    }
                }
            (function($){
                $.fn.classes = function() {
                    return this.length>0? this[0].className : '';
                    }
                $.fn.blink = function(st, color){
                    var color = color || 'ff0000';
                    var value = $(this).val();
                    var textcolor = $(this).css('color');
                    $(this).css({color : '#ffffff'});
                    var span = $('<span class="'+$(this).classes()+' hint" type="blinker" style="z-index:1;color:#'+color+';">'+st+'</span>');
                    span
                    .click(function(){
                        if ($(this).parent().find('input').val()==value){$(this).parent().find('input').css({color : textcolor});$(this).parent().find('input').focus();span.remove()}
                        })
                    $(this)
                    .keydown(function(){
                        $(this).css({color : textcolor});
                        span.remove();
                        })
                    .parent()
                    .append(span)
                    return this
                    }
                
                $.fn.hint = function(st, color){
                    var span = $('<span class="'+$(this).classes()+' hint" type="hint" style="z-index:1;color:#999;">'+st+'</span>');
                    span
                    .click(function(){
                        if ($(this).parent().find('input').val()==''){$(this).css({color:'#ccc'});$(this).parent().find('input').focus()}
                        })
                    $(this)
                    .blur(function(){
                        if ($(this).val()==''){$(this).parent().find('span[type="hint"]').css({zIndex:1, color:'#999'})}
                        })
                    .keydown(function(){
                        $(this).parent().find('span').css({zIndex:-1})
                        })
                    .keyup(function(){
                        if ($(this).val()!=''){$(this).parent().find('span').css({zIndex:-1})}else{$(this).parent().find('span').css({zIndex:1})}
                        })
                    .parent()
                    .append(span)
                    return this
                    }
                })(jQuery);
            
            function isValidEmailAddress(emailAddress) {
                var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
                return pattern.test(emailAddress);
                };
            
            function signup(){
                if ($('#name').val().trim() == ''){$('#name').focus();return}
                if ($('#email').val().trim() == ''){$('#email').focus();return}
                if (!isValidEmailAddress($('#email').val())){
                    $('#email').blink('Enter a valid email');
                    return
                    }
                if ($('#name').val().trim() == ''){
                    $('#name').blink('Enter your name');
                    return
                    }
                var SDB = new sdb();
                $.jStorage.set('alreadysent', true);
                $('#available').hide();
                $('#alreadysent').show();
                SDB.register_email($('#email').val(), {name : $('#name').val(),state : window.visitor_region || '', city : window.visitor_city || ''});
                }
            
            $(document).ready(function(){
                $('#name').hint('Name');
                $('#email').hint('Email');
                if ($.jStorage.get('alreadysent')){
                    $('#alreadysent').show();
                    return;
                    }
                if(google.loader.ClientLocation)
                {
                    window.visitor_lat = google.loader.ClientLocation.latitude;
                    window.visitor_lon = google.loader.ClientLocation.longitude;
                    window.visitor_city = google.loader.ClientLocation.address.city;
                    window.visitor_region = google.loader.ClientLocation.address.region;
                    window.visitor_country = google.loader.ClientLocation.address.country;
                    window.visitor_countrycode = google.loader.ClientLocation.address.country_code;
                    if (visitor_region=='CA')
                    {$('#available').show();
                        }
                    else
                    {$('#notavailable').show()}
                    }
                else
                {
                    $('#available').show();
                    }
                });
        </script>
    </body>
</html>





